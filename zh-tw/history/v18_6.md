# Version 18.6

2019年2月6日

## 一般新增功能

- 改善了多選區模式下的各種功能。例如，您現在可以複製多個選區，然後貼上到另一處的多選區，如果在 **自訂** 對話方塊的 [**編輯** 頁面](../dlg/customize/edit/index) 上啟用了 **總是插入新行複製多個選區時** 選項（預設）。如果禁用了 **當在多選區輸入時保持選區** 選項（預設），則在按箭頭鍵移動游標時，多個游標不再局限於多選區範圍內。
- 新版本允許您通過按 DELETE 鍵刪除換行符，當選區的每個游標位於每行的末尾，或者按 BACK 鍵刪除換行符，當空選區的每個游標位於每行的開頭時。
- 如果在組態屬性對話方塊的 [**亮顯（2）** 頁面](../dlg/properties/highlight2/index) 上啟用了 **自動完成括號/引號標記** 選項，新版本允許您能在多選區模式下自動完成括號/引號。
- 新版本允許您在多選區模式下所選取的列範圍內，對文字進行 **排序** 或 **刪除重複行**。
- 新版本讓您能在多選區模式下 [**插入/覆寫** 命令](../cmd/insert/insert)（INSERT 鍵）來切換插入/覆寫模式。
- 改善了 **復原** 命令後恢復游標位置和選取範圍的行為。例如，在執行 **復原** **刪除右側單字**（CTRL + DELETE）命令以及 **復原** **重複行** 命令之後，游標位置以及選取行的範圍會移回正確的位置。
- 新的預設快速鍵包括 ALT+CTRL+SHIFT+向上/下鍵，能取消多選區最上/下方的選取（ [**取消多選區最上方選取**](../cmd/edit/cancel_top_sel) 以及 [**取消多選區最下方選取**](../cmd/edit/cancel_bottom_sel) 命令）。
- 在選擇多個選區時，提高了游標移動和文字編輯的速度。
- 在不使用臨時檔案的情況下，大大提高了打開超大檔案的速度。

### 測試結果：

|  | v17.9 | v18.4 | v18.5 | v18.6 | 與 v17.9 相較 |
| --- | --- | --- | --- | --- | --- |
| 打開一個超大檔案 | 20.4 秒 | 15.6 秒 | 8.17 秒 | 7.28 秒 | 快 2.80 倍 |

\\* 1.34 GB，100,000,000 行，ASCII 隨機數據，「使用臨時檔案」選項關。測試系統：Windows 10 (64-bit)，Core i7-8700K，32 GB RAM，500 GB SSD。

- 大大提高了 **刪除換行符號** 命令， **全部取代**（當尋找字串包含換行符號而取代字串沒有時），以及 **復原** 操作的速度。請參閱下面的測試結果表。

### 測試結果：

|  | v18.4 | v18.6 | 與 v18.4 相較 |
| --- | --- | --- | --- |
| 刪除換行符號 | 6.02 秒 | 3.44 秒 | 快 1.75 倍 |
| 復原上述操作 | 15.0 秒 | 6.33 秒 | 快 2.37 倍 |

\\* 全部取代：取消勾選「符合大小寫」，勾選「逸出序列」；所有測試：538 MB，10,000,000 行，ASCII 隨機數據，「使用臨時檔案」選項關。測試系統：Windows 10 (64-bit)，Core i7-8700K，32 GB RAM，500 GB SSD。

- 提高了編輯包含很長行的文檔時的速度。
- 改善了 [**右移一個單字**](../cmd/edit/right_word)（CTRL+向右鍵）， [**左移一個單字**](../cmd/edit/left_word)（CTRL+向左鍵）， [**往右延伸一個單字**](../cmd/edit/shift_right_word)（CTRL+SHIFT+向右鍵），以及 [**往左延伸一個單字**](../cmd/edit/shift_left_word)（CTRL+SHIFT+向左鍵）命令的行為。
- 將鍵盤快速鍵 CTRL+SHIFT+H 添加為 [**多檔取代** 命令](../cmd/search/replace_in_files) 的預設快速鍵。
- 新版本允許您在 CSV 模式下篩選時複製貼上欄或重複欄。
- 添加了 **「整個字串需符合 」** 按鈕到 **篩選** 工具列上。
- 添加了自訂覆寫游標大小和顏色的功能。
- 改進了全屏模式的行為（在全屏模式下顯示狀態列，按 ALT 鍵不再顯示工具列和功能表）。

## 新增選項

- 添加了 **「<< 尋找」** 按鈕到 [**多檔取代** 對話方塊](../dlg/replace_in_files/index) 中。
- 添加了 **「除了游標所在行」** 核取方塊到 [**儲存詳細信息** 對話方塊](../dlg/properties/file/save_details/index) 中。
- 添加了 **複製多個選區時無法插入新行** 和 **當在多選區輸入時保持選區** 核取方塊到 **自訂對話方塊中的 [**編輯** 頁面](../dlg/customize/edit/index)** 上。
- 添加了 **字型大小和行距** 到 **自訂** 對話方塊 [**檢視** 頁面](../dlg/customize/view/index) 上的 **高度** 下拉清單方塊中。
- 添加了 **設定覆寫游標大小和顏色** 核取方塊到自訂對話方塊中的 [**檢視** 頁面](../dlg/customize/view/index) 上。
- 添加了 **有多選區的行** 條目到組態屬性中 [**顯示** 頁面](../dlg/properties/display/index) 上的 **指定部分** 清單中。

## 新增命令

- [刪除空行](../cmd/convert/remove_empty_lines)
- [取消多選區最上方選取](../cmd/edit/cancel_top_sel)
- [取消多選區最下方選取](../cmd/edit/cancel_bottom_sel)
- [整個字串需符合 (篩選工具列)](../cmd/search/filterbar_whole_string)

## 外掛程式 API 新增功能

新版本允許您使用以下格式從巨集調用指定的片段。分隔符（在本例中為'/'）必須用作字串的第一個字元。

editor.ExecutePlugin( "Snippets.dll", eePluginUserMessage, 2, "/FolderName/SnippetName" );
